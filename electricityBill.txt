/*********************************************************************
 * File                 : electricityBill.txt
 * Author Name          : Puttaparthi Noor Mohammed
 * Description          : To display consumer information and calculate the Electricity bill
 * Version              : 1.0
 * Last Modified Date   : 08-May-2018
 *********************************************************************/

BEGIN
	DECLARE consumer_no 		AS INTEGER
	DECLARE consumer_name 		AS CHARACTER STRING
	DECLARE no_of_units 		AS REAL
	DECLARE electricityCharges 	AS REAL
	PROMPT "Enter the consumer number" AND STORE IN consumer_no
	
	IF (isValid(consumer_no)) THEN					//customer number validation
		CONTINUE
	ELSE 
		PRINT "Invalid customer number"	
	END IF
	
	PROMPT "Enter the consumer number" AND STORE IN consumer_name
	PROMPT "Enter number of units consumed" AND STORE IN no_of_units
	
	IF (no_of_units<0) THEN						//checking  if no of units consumed is a negative values
		printf("no of units consumed cannot be negative")
	END IF

	electricityCharges=calOfeleCharges(no_of_units);
	
	PRINT "Consumer Number:    "+consumer_no
	PRINT "Consumer Name:      "+consumer_name
	PRINT "Number of units:    "+no_of_units
	
	IF (electricityCharges>0) THEN
		PRINT "Electricity Charge: "+electricityCharges
	END IF

	EXCEPTION 							//exception handling when zero units consumed
		WHEN zeroUnitsConsumed THEN
			PRINT minimumChargeMessage

END

/****************************************************
*Module name           : calOfeleCharges()
*Input parameters      : no_of_units
*Return Type	       : INTEGER 
*Author name           : Puttaparthi Noor Mohammed
*Creation Date         : 08-May-2018
*Description           : calculation of electricity charges
****************************************************************/	

SUB calOfeleCharges(no_of_units)
	DECLARE BELOW_HUN_UNITS 	AS REAL CONSTANT = 2.96
	DECLARE ABOVE_HUN_UNITS 	AS REAL CONSTANT = 5.56
	DECLARE electricityCharges 	AS REAL
	        
	IF (no_of_units>0 AND no_of_units<=100) THEN
		CALCULATE electricityCharges = no_of_units * BELOW_HUN_UNITS	//charge for using lessthan or equal to 100 units
		RETURN electricityCharges;
	ELSE IF (no_of_units>100) THEN
		CALCULATE electricityCharges = no_of_units * ABOVE_HUN_UNITS	//charge for using morethan to 100 units
		RETURN electricityCharges;
	ELSE
		RAISE 
			zeroUnitsConsumed ("Minimum Charges Apply")		//raising an exception for zero units
	END IF

END SUB

/****************************************************
*Module name           : isValid
*Input parameters      : consumer_no
*Return Type	       : BOOLEAN 
*Author name           : Puttaparthi Noor Mohammed
*Creation Date         : 08-May-2018
*Description           : validating the consumer number
****************************************************************/

SUB isValid(consumerNo)
	IF (check(consumerNo)==TRUE) THEN					//check the consumer number with database
		RETURN TRUE;
	ELSE
		RETURN FALSE; 
END SUB
















	